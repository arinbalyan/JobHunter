# ---------------------------------------------------------------------------
# Render.com Blueprint — JobSpy V2
#
# Deploy as a Background Worker (not a web service).
# The built-in HTTP health check keeps the service alive on Render's free tier.
#
# Setup:
#   1. Push this repo to GitHub
#   2. Go to https://dashboard.render.com → New → Blueprint
#   3. Connect repo → Render reads this file and creates the service
#   4. Add all environment variables from .env.example in the Render dashboard
# ---------------------------------------------------------------------------

services:
  - type: worker
    name: jobspy-v2
    runtime: docker
    plan: free
    region: oregon
    dockerfilePath: ./Dockerfile
    envVars:
      # --- Required secrets (set these in Render dashboard) ---
      - key: GMAIL_EMAIL
        sync: false
      - key: GMAIL_APP_PASSWORD
        sync: false
      - key: OPENROUTER_API_KEY
        sync: false
      - key: GOOGLE_CREDENTIALS_JSON
        sync: false
      # --- Scheduler config ---
      - key: SCHEDULER_ENABLED
        value: "true"
      - key: HEALTH_CHECK_ENABLED
        value: "true"
      - key: HEALTH_CHECK_PORT
        value: "10000"
      # --- Default schedule (UTC) ---
      # IST 8:00 AM = UTC 2:30 AM (onsite)
      - key: SCHEDULER_ONSITE_CRON
        value: "30 2 * * *"
      # US Eastern 8:00 AM = UTC 1:00 PM (remote)
      - key: SCHEDULER_REMOTE_CRON
        value: "0 13 * * *"
